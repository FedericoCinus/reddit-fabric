# Uncovering the Sociodemographic Fabric of Reddit

## 🌐 Interactive Visualization

👉 [View the live plot](https://FedericoCinus.github.io/reddit-fabric/)

---

### 🧭 What You’re Looking At

**2D subreddit projection colored by user-level sociodemographic predictions.**

We visualize a network of co-participation patterns in 2019 Reddit data among 1,400 subreddits, chosen by popularity. Posts and comments were sampled at 5% and filtered to exclude deleted content and inactive users. We retained users with at least 100 contributions and classified them by age, gender, and partisanship using pre-trained Naive Bayes models with Classify & Count.

Subreddit positions are computed via t-SNE on a PPMI-transformed co-occurrence matrix.  
🎨 Colors indicate the share of users in each subreddit predicted to be:
- 🧓 Older than the median age
- 👩 Female
- 🐘 Republican-leaning

⚪ Marker size reflects subreddit activity.  
🏷️ Cluster labels (20 in total) are generated by GPT-4o, summarizing prominent subreddit themes.


# Tutorial

An example notebook demonstrating model usage can be found at: `notebook/example-predict.ipynb`

## Using the Quantifier
`quantifier = load('models/mnb_quantifier-year-seed0.joblib')`

Perform quantification::
`quantifier.quantify(X)`

## Using the Classifier
`classifier = load('models/mnb_classifier-year-seed0.joblib')`

Make predictions:
`loaded_classifier.predict(X)`

## Feature map
The file `data/input/list_subreddits.npy` contains an array of subreddit titles. These subreddits are ordered and correspond directly to the model features in the same order. If you need to interpret model outputs or inspect features, refer to this file to map feature indices to subreddit names.

## Labels map
- Year: 0 = Old, 1 = Young.
- Gender: 0 = Male, 1 = Female.
- Partisan: 0 = Dem, 1 = Rep.

## Subreddit scores
`models/subreddit-logprobs.csv` contains the log probabilities assigned to each subreddit by the trained models. The interpretation is as follows: +∞ corresponds to (Young, Female, Republican), while -∞ corresponds to (Old, Male, Democrat).

## Set the conda environment
`conda env create -f environment.yml`

`conda activate sdienv`

## Reproducibility
The dataset can be downloaded from:  
🔗 [Google Drive link](https://drive.google.com/file/d/1vy_g9B6WM7BfO9uDUzrC_O8rAQfQCuIu/view?usp=sharing)

- **To reproduce figures and tables**:  
  Unzip `data.zip` and run the Jupyter notebooks in the `notebooks/` directory. Each notebook is named according to the figure or table it reproduces and uses the processed files located in `data/results/`.

- **To reproduce the training process**:  
  Download and unzip the same dataset. Then run:  
  ```bash
  python train_and_test_classifiers.py -s 100 -a
  python train_and_test_quantifiers.py -s 100 -a
  ```

- **To train your own classifier/quantifier**:  
  Download and unzip the dataset. Use the `X.csv` and `y.csv` files located in each attribute's folder under `data/`.